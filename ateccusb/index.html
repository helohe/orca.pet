<!DOCTYPE html>
<html lang="en_US">
	<head>
		<meta charset="UTF-8">
<!-- Begin Jekyll SEO tag v2.6.1 -->
<title>ATECC608 USB dongle | orca.pet</title>
<meta name="generator" content="Jekyll v3.8.6" />
<meta property="og:title" content="ATECC608 USB dongle" />
<meta name="author" content="Marcos Del Sol Vives" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Socram’s website" />
<meta property="og:description" content="Socram’s website" />
<link rel="canonical" href="https://orca.pet/ateccusb/" />
<meta property="og:url" content="https://orca.pet/ateccusb/" />
<meta property="og:site_name" content="orca.pet" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="ATECC608 USB dongle" />
<meta name="twitter:site" content="@Socramite" />
<meta name="twitter:creator" content="@Marcos Del Sol Vives" />
<script type="application/ld+json">
{"@type":"WebPage","url":"https://orca.pet/ateccusb/","author":{"@type":"Person","name":"Marcos Del Sol Vives"},"description":"Socram’s website","headline":"ATECC608 USB dongle","dateModified":"2020-05-31T19:03:27+02:00","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

		<link rel="icon" href="/favicon.ico?NjvwljAx" />
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta name="theme-color" content="#157878">
		<link rel="stylesheet" href="/assets/css/style.css?sY1m_xrX">

	</head>
	<body>
		<a class="page-header-link" href="/">
			<section class="page-header">
				<h1 class="project-name">orca.pet</h1>
			</section>
		</a>

		<section class="main-content">
			<h1 id="atecc608-usb-dongle">ATECC608 USB dongle</h1>

<p><img src="/ateccusb/dongle_photo.jpg?i6O1fBdm" alt="Dongle photo" /></p>

<p>This project is an USB dongle for connecting a Microchip Crypto Authentication chips to a PC.</p>

<h2 id="what-are-these-crypto-ics">What are these crypto ICs?</h2>

<p>The Crypto Authentication chips is a series of cheap (less than a euro in single quantities) cryptographic chips from Microchip, designed to run as secure enclaves in equally inexpensive consumer electronics such as IoT devices.</p>

<p>This series include:</p>

<ul>
  <li>The <a href="https://www.microchip.com/wwwproducts/en/ATECC608A">ATECC608A</a>, a pretty capable device which has AES, SHA256, HMAC, EC, DRBG and TRNG.</li>
  <li>The <a href="https://www.microchip.com/wwwproducts/en/ATECC508A">ATECC508A</a>, an older version of the ATECC608A.</li>
  <li>The <a href="https://www.microchip.com/wwwproducts/en/ATSHA204A">ATSHA204</a> which does SHA and HMAC only.</li>
  <li>The deprecated <a href="https://www.microchip.com/wwwproducts/en/ATAES132A">ATAES132</a>, which does AES only.</li>
</ul>

<p>As opposed to most companies which require signing a NDA for accesing the documentation, Microchip has shared all the required documentation to use them. They even have a public, open source cryptography library called <a href="https://github.com/MicrochipTech/cryptoauthlib">cryptoauthlib</a>.</p>

<p>Their availability, pricing and documentation make them a pretty nice device for securing critical information on a server or a PC, such as the HTTPS or SSH private keys.</p>

<p>However, while the chips are easy to come by, there seems to be no free, open-source design to use them on a PC. The only official solutions are large, bulky development kits which of course are not suitable for end usage.</p>

<p>This dongle attempts to solve that problem, by providing a small, easy to build USB dongle made using dirty common and cheap off-the-shelf parts. While it uses SMD parts, I’ve intentionally used relatively large parts whereas possible so it can be easily assembled and soldered by hand.</p>

<p><strong>WARNING: This project requires a CryptoAuthentication device that uses the SWI protocol (part number is ATxxx-xxxxZ), instead of I2C (part number is ATxxx-xxxA). An I2C device cannot be configured to use SWI, and vice-versa.</strong></p>

<h2 id="schematic">Schematic</h2>

<p><img src="/ateccusb/schematic.png?7F7IOdZP" alt="Dongle schematic" /></p>

<h2 id="circuit-explanation">Circuit explanation</h2>

<p>The dongle is extremely simple, and has the bare minimum to work. It is designed around the CH340G USB-UART interface made by WCH (<code class="highlighter-rouge">U1</code>). Having a built-in voltage regulator, all it needs is a single 12MHz crystal (<code class="highlighter-rouge">X1</code>).</p>

<p>While the USB-UART IC has a full-duplex interface with separate <code class="highlighter-rouge">TXD</code> and <code class="highlighter-rouge">RXD</code> pins, the Crypto Authentication devices expect communication to happen over a single I/O pin called <code class="highlighter-rouge">SWI</code>.</p>

<p>The task of converting the full-duplex interface to the half-duplex interface is accomplished by the non-inverting buffer IC (<code class="highlighter-rouge">U3</code>) and a pull-up resistor (<code class="highlighter-rouge">R1</code>).</p>

<p>The board also provides an LED controllable by the secure element’s GPIO pin (<code class="highlighter-rouge">LED2</code>). If the GPIO pin wants to be used as a sense pin and the LED interferes, it can be disabled without desoldering anything just by cutting the <code class="highlighter-rouge">LY</code> (<strong>L</strong>ED <strong>Y</strong>es) and bridging <code class="highlighter-rouge">LN</code> (<strong>L</strong>ED <strong>N</strong>o).</p>

<p>Finally, the <code class="highlighter-rouge">H1</code> header is a debug header which exposes the 5V, SWI, GPIO and ground signals.</p>

<h2 id="parts">Parts</h2>

<p>Most of the parts come from <a href="https://www.lcsc.com">LCSC</a>, except for the Crypto Authentication IC which is not available from them, and comes from <a href="https://www.microchipdirect.com/">MicrochipDirect</a> instead.</p>

<table>
  <thead>
    <tr>
      <th>Des.</th>
      <th>Part</th>
      <th>Description</th>
      <th>Footprint</th>
      <th>Supplier</th>
      <th>Supplier P/N</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>U1</td>
      <td>CH340G</td>
      <td>USB-UART IC</td>
      <td>SOIC-16</td>
      <td>LCSC</td>
      <td>C14267</td>
    </tr>
    <tr>
      <td>U2</td>
      <td>ATECC608A</td>
      <td>Crypto  IC</td>
      <td>SOIC-8</td>
      <td>Microchip Direct</td>
      <td>ATECC608A-SSHCZ-B</td>
    </tr>
    <tr>
      <td>U3</td>
      <td>MC74VHC1G07DTT1G</td>
      <td>Non-inverting buffer</td>
      <td>SOT-23-6</td>
      <td>LCSC</td>
      <td>C242266</td>
    </tr>
    <tr>
      <td>X1</td>
      <td>X49SD12MSD2SC</td>
      <td>12MHz crystal</td>
      <td>—</td>
      <td>LCSC</td>
      <td>C16369</td>
    </tr>
    <tr>
      <td>Q1</td>
      <td>S8050H</td>
      <td>NPN transistor</td>
      <td>SOT-23</td>
      <td>LCSC</td>
      <td>C111272</td>
    </tr>
    <tr>
      <td>C1,C2</td>
      <td>CL21C200JBANNNC</td>
      <td>20pF MLC cap</td>
      <td>0805</td>
      <td>LCSC</td>
      <td>C1798</td>
    </tr>
    <tr>
      <td>C3,C4</td>
      <td>CL21B104KBFWPNE</td>
      <td>100nF MLC cap</td>
      <td>0805</td>
      <td>LCSC</td>
      <td>C307360</td>
    </tr>
    <tr>
      <td>C5</td>
      <td>CL31A226KOHNNNE</td>
      <td>22uF MLC cap</td>
      <td>1206</td>
      <td>LCSC</td>
      <td>C90146</td>
    </tr>
    <tr>
      <td>R1,R4</td>
      <td>RMC08054.7K1%N</td>
      <td>4.7K resistor</td>
      <td>0805</td>
      <td>LCSC</td>
      <td>C269746</td>
    </tr>
    <tr>
      <td>R2,R3</td>
      <td>RMC08051501%N</td>
      <td>150ohm resistor</td>
      <td>0805</td>
      <td>LCSC</td>
      <td>C325766</td>
    </tr>
    <tr>
      <td>LED1</td>
      <td>NCD1206R1</td>
      <td>Red LED</td>
      <td>1206</td>
      <td>LCSC</td>
      <td>C84270</td>
    </tr>
    <tr>
      <td>LED2</td>
      <td>NCD1206G1</td>
      <td>Green LED</td>
      <td>1206</td>
      <td>LCSC</td>
      <td>C99881</td>
    </tr>
    <tr>
      <td>USB1</td>
      <td>SOFNG USB-05</td>
      <td>USB-A 2.0 male</td>
      <td>—</td>
      <td>LCSC</td>
      <td>C112454</td>
    </tr>
    <tr>
      <td>H1</td>
      <td>MTB125-1104R1</td>
      <td>4x1 male pin header</td>
      <td>—</td>
      <td>LCSC</td>
      <td>C376122</td>
    </tr>
  </tbody>
</table>

<p>The <strong>total cost is about 3€ per dongle</strong> in small quantities, including the cost of making the PCBs.</p>

<h2 id="downloads">Downloads</h2>

<p>This project is <a href="https://easyeda.com/socram8888/atecc-usb-dongle">available at <strong>EasyEDA</strong></a> where you can freely look, modify and download the schematic, Gerber files or bill of materials.</p>

<h2 id="software">Software</h2>

<p>For now, I have not yet had time to adapt the Microchip library to this dongle, which means there’s zero software for it yet.</p>


			<footer class="site-footer">
				<span class="site-footer-owner">Website maintained by <a href="/#contact">Marcos Del Sol Vives</a>.</span>
				<span class="site-footer-credits">Built using <a href="https://github.com/socram8888/orca.pet">GitHub</a>, <a href="https://jekyllrb.com/">Jekyll</a> and <a href="https://porkbun.com/">Porkbun</a>.</span>
			</footer>
		</section>
	</body>
</html>
